<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>SecondHand C0D1NG</title>
  
  
  <link href="http://yiweishen.github.io/atom.xml" rel="self"/>
  
  <link href="http://yiweishen.github.io/"/>
  <updated>2024-03-24T03:30:38.000Z</updated>
  <id>http://yiweishen.github.io/</id>
  
  <author>
    <name>Yiwei Shen</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Handle Login with Python Bindings for Selenium</title>
    <link href="http://yiweishen.github.io/2024/03/24/Handle-Login-with-Python-Bindings-for-Selenium/"/>
    <id>http://yiweishen.github.io/2024/03/24/Handle-Login-with-Python-Bindings-for-Selenium/</id>
    <published>2024-03-24T02:52:12.000Z</published>
    <updated>2024-03-24T03:30:38.000Z</updated>
    
    <content type="html"><![CDATA[<p>Before everything else, you need to install the Selenium package, of course.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install selenium</span><br></pre></td></tr></table></figure><p>Or, if you hate to deal with anti-bot measures, you can just use this.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install undetected-chromedriver</span><br></pre></td></tr></table></figure><p>Then, add the user data directory to the ChromeOptions object. It is the path to your Chrome profile. For macOS, it is located at ‘~&#x2F;Library&#x2F;Application Support&#x2F;Google&#x2F;Chrome’.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> undetected_chromedriver <span class="keyword">as</span> uc</span><br><span class="line"></span><br><span class="line">options = uc.ChromeOptions()</span><br><span class="line">options.add_argument(<span class="string">f&quot;--user-data-dir=<span class="subst">&#123;<span class="string">&#x27;Path_to_your_Chrome_profile&#x27;</span>&#125;</span>&quot;</span>)</span><br><span class="line">driver = uc.Chrome(options=options)</span><br><span class="line"></span><br><span class="line">driver.get(<span class="string">&#x27;https://www.example.com&#x27;</span>)</span><br></pre></td></tr></table></figure><p>The <code>--user-data-dir</code> argument is kind of cheating because it allows you to bypass the login process without actually logging in.</p><p>Cookie is your friend.</p><p>But sometimes, you need to handle the login process, for instance, you have to switch between multiple accounts.</p><p>First of all, take care of your credentials. Use an .env file.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> dotenv <span class="keyword">import</span> load_dotenv</span><br><span class="line"></span><br><span class="line">load_dotenv()</span><br><span class="line"></span><br><span class="line">USERNAME = os.getenv(<span class="string">&#x27;USERNAME_ENV_VAR&#x27;</span>)</span><br><span class="line">PASSWORD = os.getenv(<span class="string">&#x27;PASSWORD_ENV_VAR&#x27;</span>)</span><br></pre></td></tr></table></figure><p>Then, you can use the <code>send_keys</code> method to fill in the username and password fields. I add one while loop to wait for the element in case the script runs too fast.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        driver.find_element(by=By.ID, value=<span class="string">&quot;username&quot;</span>).send_keys(USERNAME)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">driver.find_element(by=By.ID, value=<span class="string">&quot;password&quot;</span>).send_keys(PASSWORD)</span><br><span class="line">driver.find_element(by=By.ID, value=<span class="string">&quot;submit&quot;</span>).click()</span><br></pre></td></tr></table></figure><p>After logging in, the chrome usally pops up a dialog asking if you want to save the password. It is annoying.</p><p>You can try to disable it by adding the <code>--disable-save-password-bubble</code> or <code>--disable-popup-blocking</code> argument to the ChromeOptions object. I don’t think it works. But you can try.</p><p>In the end, I just used a hack, that is to open a new tab and immediately close it, the popup will appear.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># open a new tab</span></span><br><span class="line">driver.execute_script(<span class="string">&quot;window.open(&#x27;&#x27;,&#x27;_blank&#x27;)&quot;</span>)</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">1</span>) <span class="comment"># 1 second wait is enough I guess</span></span><br><span class="line">driver.switch_to.window(driver.window_handles[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># say goodbye to the new tab</span></span><br><span class="line">driver.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># now switch back to the original tab</span></span><br><span class="line">driver.switch_to.window(driver.window_handles[<span class="number">0</span>])</span><br></pre></td></tr></table></figure><p>That’s it.</p><p>Oh, one more thing.</p><p>Add user-agent to the ChromeOptions object is also a good idea. And please do not forget to specify <code>version_main</code> for the driver to match your current chrome version.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Before everything else, you need to install the Selenium package, of course.&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gut</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Raycast Alternative on Windows 11: Microsoft PowerToys</title>
    <link href="http://yiweishen.github.io/2024/03/16/Raycast-Alternative-on-Windows-11-Microsoft-PowerToys/"/>
    <id>http://yiweishen.github.io/2024/03/16/Raycast-Alternative-on-Windows-11-Microsoft-PowerToys/</id>
    <published>2024-03-16T15:42:57.000Z</published>
    <updated>2024-03-16T16:04:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>Raycast is a productivity tool for macOS. It allows you to quickly access files, folders, and applications. It’s great, but only available on macOS. If you already use Raycast, you know how useful it is. If you don’t, you should give it a try if you have a Mac.</p><p>For daily work, I also use Windows, and I was trying to implement a similar workflow on Windows. The thing I missed the most was the ability to search and open previously used workspaces in VS Code or remote machines with a few keystrokes.</p><p>You can guess my excitement when I found out about Microsoft PowerToys.</p><p>OK.</p><p>Enable VS Code search in the settings for PowerToys Run utility.</p><p>Then, you can use the shortcut <code>Alt + Space</code> to search for your workspaces.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; THE_WORKSPACE_NAME_YOU_WANT_TO_OPEN</span><br></pre></td></tr></table></figure><p>Now I have to find the equivalent of <code>zsh-autosuggestions</code> on Windows. Wish me luck.</p><p>Links to the tools mentioned in this post:</p><ul><li><a href="https://raycast.com/">Raycast</a></li><li><a href="https://github.com/microsoft/PowerToys">Microsoft PowerToys</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Raycast is a productivity tool for macOS. It allows you to quickly access files, folders, and applications. It’s great, but only availabl</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Install Windows 11 with VMware Fusion on Apple M2 MacBook</title>
    <link href="http://yiweishen.github.io/2023/09/02/Install-Windows-11-with-VMware-Fusion-on-Apple-M2-MacBook/"/>
    <id>http://yiweishen.github.io/2023/09/02/Install-Windows-11-with-VMware-Fusion-on-Apple-M2-MacBook/</id>
    <published>2023-09-02T18:54:02.000Z</published>
    <updated>2023-09-02T19:27:10.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="The-Problem"><a href="#The-Problem" class="headerlink" title="The Problem"></a>The Problem</h2><ul><li>Microsoft is only providing intel version ISO file for Windows 11.</li><li>For Windows 11 Insider Preview, the arm version is provided only in VHDX format.</li></ul><h2 id="Workaround"><a href="#Workaround" class="headerlink" title="Workaround"></a>Workaround</h2><p>Luckily, we can get the ESD file and then convert it into ISO file which can be used in VMware.</p><h2 id="Steps"><a href="#Steps" class="headerlink" title="Steps"></a>Steps</h2><p>Go to the website of <a href="https://www.parallels.com/ca/products/desktop/">Parallels</a> to download their Mac app. Alternatively, you can get the DMG link from <a href="https://formulae.brew.sh/api/cask/parallels.json">Homebrew API</a></p><p>The link looks like <a href="https://download.parallels.com/desktop/v19/19.0.0-54570/ParallelsDesktop-19.0.0-54570.dmg">this</a>. After downloading, double click the DMG file but don’t install the Parallels. You just need to mount the DMG file.</p><p>Then open the terminal and run the following commands:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo ditto /Volumes/Parallels\ Desktop\ 19/Parallels\ Desktop.app/Contents/MacOS/prl_esd2iso /usr/local/bin/prl_esd2iso</span><br><span class="line">sudo ditto /Volumes/Parallels\ Desktop\ 19/Parallels\ Desktop.app/Contents/Frameworks/libwimlib.1.dylib /usr/local/lib/libwimlib.1.dylib</span><br></pre></td></tr></table></figure><p>We can thank Parallels for providing these amazing tools later. Unmount and delete the DMG file.</p><p>To figure out the download link for Windows 11 ESD file:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/Downloads/ &amp;&amp; curl -L <span class="string">&quot;https://go.microsoft.com/fwlink?linkid=2156292&quot;</span> -o products_Win11.cab &amp;&amp; tar -xf products_Win11.cab products.xml &amp;&amp; <span class="built_in">cat</span> products.xml | <span class="built_in">cat</span> products.xml | grep <span class="string">&quot;.*_CLIENTCONSUMER_RET_A64FRE_en-us.esd&quot;</span> | sed -e s/<span class="string">&quot;&lt;FileName&gt;&quot;</span>//g -e s/<span class="string">&quot;&lt;\/FileName&gt;&quot;</span>//g -e s/\ //g -e s/<span class="string">&quot;&lt;FilePath&gt;&quot;</span>//g -e s/<span class="string">&quot;&lt;\/FilePath&gt;&quot;</span>//g -e s/\ //g | <span class="built_in">head</span> -n 2</span><br></pre></td></tr></table></figure><p>By the way, I assume your current working directory is ~&#x2F;Downloads&#x2F;. If not, please change it accordingly.</p><p>Use curl to download the ESD file:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://dl.delivery.mp.microsoft.com/filestreamingservice/files/f16733c5-e9f8-4613-9fe6-d331c8dd6e28/22621.1702.230505-1222.ni_release_svc_refresh_CLIENTCONSUMER_RET_A64FRE_en-us.esd --output win11.esd</span><br></pre></td></tr></table></figure><p>Convert the ESD file into ISO file.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">prl_esd2iso ~/Downloads/win11.esd ~/Downloads/win11.iso</span><br></pre></td></tr></table></figure><p>Now you can insert the ISO file into VMware Fusion which is free to use with a <a href="https://www.vmware.com/go/get-fusionplayer-key">personal license</a> You can find the license key after you register&#x2F;login on the their website.</p><p>Install the vmware fusion with Homebrew. Yes, you need have Homebrew installed, but I guess you already done it.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install --cask vmware-fusion</span><br></pre></td></tr></table></figure><p>If you run into the chown issue like:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Chown /Applications/VMware Fusion.app: Operation not permitted</span><br></pre></td></tr></table></figure><p>Please double check if the Full Disk Access is granted for the Terminal.app in system settings Privacy &amp; Security.</p><p>Drag and drop the Windows 11 ISO file into vmware. You can go with UEFI and also the default values with the rest of the settings.</p><p>Pay attention to the message on the screen, if it is saying press any key to continue, don’t wait. You only have five seconds to hit the key, so be fast. I will not talk about the basic steps of installing Windows 11, I trust you can install the operating system with the GUI.</p><p>When you reach the setup step of internet connection, press shift + fn + F10 to invoke the CMD. Input:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">OOBE\BYPASSNRO</span><br></pre></td></tr></table></figure><p>It will auto restart the setup steps and this time you choose the option I don’t have internet (Yup, actually you don’t.) Continue with limited setup. If everything goes well. In the end, you get into Windows 11 Desktop</p><p>Run PowerShell as Administrator and type:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-ExecutionPolicy RemoteSigned</span><br></pre></td></tr></table></figure><p>Insert the VMware Tools CD image into the virtual machine. Run the setup script with PowerShell.</p><p>In case you want to set the Execution Policy back:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-ExecutionPolicy Restricted</span><br></pre></td></tr></table></figure><p>If the VMware Tools are successfully installed, the internet connection is working inside the virtual machine. Adjust settings as you wish. For example, set the display resolution to 2880 x 1800 and Scale to 200%.</p><p>A fully operational Windows 11 on Mac is all yours.</p><p>Enjoy.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;The-Problem&quot;&gt;&lt;a href=&quot;#The-Problem&quot; class=&quot;headerlink&quot; title=&quot;The Problem&quot;&gt;&lt;/a&gt;The Problem&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Microsoft is only providing </summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Find and Terminate Active Resources on AWS Using Tag Editor in Resource Groups</title>
    <link href="http://yiweishen.github.io/2023/08/23/Find-and-Terminate-Active-Resources-on-AWS-Using-Tag-Editor-in-Resource-Groups/"/>
    <id>http://yiweishen.github.io/2023/08/23/Find-and-Terminate-Active-Resources-on-AWS-Using-Tag-Editor-in-Resource-Groups/</id>
    <published>2023-08-23T00:30:32.000Z</published>
    <updated>2023-08-23T00:36:48.000Z</updated>
    
    <content type="html"><![CDATA[<p>You must have the same headache as me when AWS sends you an email saying this month you get yet another bill for all the unknown active resources on AWS.</p><p>But wait, where are they? How can I find them?</p><p>I have been asking myself these questions time and time again. Now I finally find a simple way to deal with it.</p><ul><li>Open AWS Resource Groups: <a href="https://console.aws.amazon.com/resource-groups/">https://console.aws.amazon.com/resource-groups/</a></li><li>In the navigation pane, on the left side of the screen, choose Tag Editor.</li><li>For Regions, choose All regions.</li><li>For Resource types, choose All supported resource types.</li><li>Choose Search resources.</li></ul><p>Then, you will see all the resources that are still active in your account.</p><p>You need to terminate them one by one.</p><p>Good luck!</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;You must have the same headache as me when AWS sends you an email saying this month you get yet another bill for all the unknown active r</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Optimize TCP by enabling BBR on Oracle Cloud Linux</title>
    <link href="http://yiweishen.github.io/2023/05/07/Optimize-TCP-by-enabling-BBR-on-Oracle-Cloud-Linux/"/>
    <id>http://yiweishen.github.io/2023/05/07/Optimize-TCP-by-enabling-BBR-on-Oracle-Cloud-Linux/</id>
    <published>2023-05-07T20:03:12.000Z</published>
    <updated>2023-05-07T20:30:24.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>BBR (“Bottleneck Bandwidth and Round-trip propagation time”) aims to improve network performance and reduce latency. BBR estimates the available network bandwidth and the round-trip time (RTT) to adjust the TCP sending rate dynamically, reducing queuing delays and reducing packet loss.</p><h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><p>Check if your Linux kernel version is 4.9 or higher.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">uname</span> -r</span><br></pre></td></tr></table></figure><h2 id="Congestion-Control-Status"><a href="#Congestion-Control-Status" class="headerlink" title="Congestion Control Status"></a>Congestion Control Status</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl net.ipv4.tcp_available_congestion_control</span><br></pre></td></tr></table></figure><p>If you see <code>net.ipv4.tcp_available_congestion_control = bbr cubic reno</code>, then BBR is enabled. You can check it again after we enable BBR.</p><h2 id="Enable-BBR"><a href="#Enable-BBR" class="headerlink" title="Enable BBR"></a>Enable BBR</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;net.core.default_qdisc=fq&quot;</span> &gt;&gt; /etc/sysctl.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;net.ipv4.tcp_congestion_control=bbr&quot;</span> &gt;&gt; /etc/sysctl.conf</span><br><span class="line">sudo sysctl -p</span><br></pre></td></tr></table></figure><p>The first line enables Fair Queueing (FQ), which is a network scheduler that improves network performance by reducing latency and jitter. The second line enables BBR.</p><p>The last line reloads the configuration file for the changes to take effect.</p><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><p>Optimizing HTTP&#x2F;2 prioritization with BBR and tcp_notsent_lowat:<br><a href="https://blog.cloudflare.com/http-2-prioritization-with-nginx/">https://blog.cloudflare.com/http-2-prioritization-with-nginx/</a></p><p>TCP BBR congestion control comes to GCP – your Internet just got faster:<br><a href="https://cloud.google.com/blog/products/networking/tcp-bbr-congestion-control-comes-to-gcp-your-internet-just-got-faster">https://cloud.google.com/blog/products/networking/tcp-bbr-congestion-control-comes-to-gcp-your-internet-just-got-faster</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Introduction&quot;&gt;&lt;a href=&quot;#Introduction&quot; class=&quot;headerlink&quot; title=&quot;Introduction&quot;&gt;&lt;/a&gt;Introduction&lt;/h2&gt;&lt;p&gt;BBR (“Bottleneck Bandwidth and</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Progress Display for ftplib using Rich Library in Python</title>
    <link href="http://yiweishen.github.io/2022/07/03/Progress-Display-for-ftplib-using-Rich-library-in-Python/"/>
    <id>http://yiweishen.github.io/2022/07/03/Progress-Display-for-ftplib-using-Rich-library-in-Python/</id>
    <published>2022-07-03T14:44:57.000Z</published>
    <updated>2022-07-03T16:19:51.000Z</updated>
    
    <content type="html"><![CDATA[<p>The ftplib is included in Python batteries, which can be used to implement the client side of the FTP protocol. It’s compact and easy to use, but missing a user-friendly progress display. For example, if you have a long-time connection to upload &#x2F; download a large file to &#x2F; from the FTP server, the terminal tells you nothing about the progress of the file transfer.</p><p>Don’t panic.</p><p>Luckily, we have Rich, a Python library, showing rich text (with color and style) to the terminal. Especially, it can display continuously updated information regarding the progress of long running tasks &#x2F; file copies etc. That is perfect for the scenario of file transfer with FTP server.</p><p>The main challenge is that the Progress in rich.progress has to be called every time you need to update the UI and we have to, at the same time, synchronize the actual progress of FTP file transfer.</p><p>OK, show me the code.</p><p>First, make sure you have rich library installed. </p><p>Then, double check if you get these dependencies imported.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> ftplib <span class="keyword">import</span> FTP_TLS</span><br><span class="line"><span class="keyword">from</span> rich <span class="keyword">import</span> <span class="built_in">print</span></span><br><span class="line"><span class="keyword">from</span> rich.progress <span class="keyword">import</span> Progress, SpinnerColumn, TotalFileSizeColumn, TransferSpeedColumn, TimeElapsedColumn</span><br></pre></td></tr></table></figure><p>The implementation is straightforward with the help from the callback in FTP.retrbinary(). The callback function is called for each block of data received. And that is when we take the chance to update and render the progress display.</p><p>Here is an example of downloading from FTP server.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">download_from_ftp</span>(<span class="params">file_path</span>):</span><br><span class="line">    <span class="comment"># ftplib.FTP_TLS() connects to FTP server with username and password</span></span><br><span class="line">    ftp = FTP_TLS(host=FTP_HOST, user=FTP_USER, passwd=FTP_PASSWD)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Securing the data connection requires the user to explicitly ask for it by calling the prot_p()</span></span><br><span class="line">    ftp.prot_p()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># prepare a file object on local machine to write data into</span></span><br><span class="line">    f = <span class="built_in">open</span>(file_path, <span class="string">&#x27;wb&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># initialize the ftp_progress with file_size, ftp connection and the file object</span></span><br><span class="line">    <span class="comment"># you may need to work out how to get the actual file size</span></span><br><span class="line">    <span class="comment"># Hint: FTP.dir() produces a directory listing as returned by the LIST command</span></span><br><span class="line">    tracker = ftp_progress(file_size, ftp, f)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># the trick to update rich progress display is using the callback function in retrbinary()</span></span><br><span class="line">    ftp.retrbinary(<span class="string">&#x27;RETR example_file.zip&#x27;</span>, callback=tracker.handle)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># stop progress display and also terminate the file object</span></span><br><span class="line">    tracker.stop()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># send a QUIT command to the server and close the connection</span></span><br><span class="line">    ftp.quit()</span><br></pre></td></tr></table></figure><p>If you go through the comments I wrote for the above function, then the below class should be fairly self-explanatory to you. The handle() is where we reflect the changes in each iteration, yes in callbacks.</p><p>One thing you should be aware of is that FTP uses two separate TCP connections: one to carry commands and the other to transfer data. So in the case of a long-time file transfer, you need to talk to the command channel once a while, to keep it connected. ‘NOOP’ command is designed for this, to prevent the client from being automatically disconnected (by server) for being idle.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ftp_progress</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, file_size, ftp, f</span>):</span><br><span class="line">        self.file_size = file_size</span><br><span class="line">        self.ftp = ftp</span><br><span class="line">        self.f = f</span><br><span class="line">        self.size_written = <span class="number">0</span></span><br><span class="line">        self.time = time.time()</span><br><span class="line">        self.progress = Progress(</span><br><span class="line">            SpinnerColumn(),</span><br><span class="line">            *Progress.get_default_columns(),</span><br><span class="line">            TotalFileSizeColumn(),</span><br><span class="line">            TransferSpeedColumn(),</span><br><span class="line">            TimeElapsedColumn(),</span><br><span class="line">        )</span><br><span class="line">        self.task_download = self.progress.add_task(<span class="string">&quot;[red]Download...&quot;</span>, total=self.file_size)</span><br><span class="line">        self.progress.start()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">stop</span>(<span class="params">self</span>):</span><br><span class="line">        self.progress.stop()</span><br><span class="line">        self.f.close()</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">handle</span>(<span class="params">self, data</span>):</span><br><span class="line">        self.f.write(data)</span><br><span class="line">        self.size_written += <span class="number">8192</span></span><br><span class="line">        self.progress.update(self.task_download, advance=<span class="number">8192</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># keep FTP control connection alive</span></span><br><span class="line">        <span class="keyword">if</span> time.time() - self.time &gt; <span class="number">60</span>:</span><br><span class="line">            self.time = time.time()</span><br><span class="line">            self.ftp.putcmd(<span class="string">&#x27;NOOP&#x27;</span>)</span><br></pre></td></tr></table></figure><p>As a final note, it should be mentioned that be careful of passing by reference in Python. If you don’t close &#x2F; keep FTP connections correctly with the server, strange things (not the TV show) cound happen.</p><p>And, stay away from the nested callbacks, always.</p><p>Ref:</p><p>ftplib — FTP protocol client<br><a href="https://docs.python.org/3/library/ftplib.html">https://docs.python.org/3/library/ftplib.html</a></p><p>Rich’s documentation<br><a href="https://rich.readthedocs.io/en/stable/index.html">https://rich.readthedocs.io/en/stable/index.html</a></p><p>Progress Display (Rich)<br><a href="https://rich.readthedocs.io/en/stable/progress.html">https://rich.readthedocs.io/en/stable/progress.html</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;The ftplib is included in Python batteries, which can be used to implement the client side of the FTP protocol. It’s compact and easy to </summary>
      
    
    
    
    
    <category term="python" scheme="http://yiweishen.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>Rebuild this blog using Hexo and Theme NexT</title>
    <link href="http://yiweishen.github.io/2022/02/24/Rebuild-this-blog-using-Hexo-and-Theme-NexT/"/>
    <id>http://yiweishen.github.io/2022/02/24/Rebuild-this-blog-using-Hexo-and-Theme-NexT/</id>
    <published>2022-02-24T23:08:10.000Z</published>
    <updated>2022-02-26T04:39:24.000Z</updated>
    
    <content type="html"><![CDATA[<p>Seven years ago, I wrote the first post in this blog to explain how to build this blog. Basically, I still use the Hexo framework for blogging. Here is the summary of how you can rebuild the blog today.</p><h1 id="Versions"><a href="#Versions" class="headerlink" title="Versions"></a>Versions</h1><ul><li>Node.js v17.6.0</li><li>npm 8.5.1</li><li>hexo 6.0.0</li><li>hexo-theme-next 8.10.0</li></ul><p>If you use the different versions, things may break.</p><h1 id="Create-GitHub-Repo-for-the-blog-folder"><a href="#Create-GitHub-Repo-for-the-blog-folder" class="headerlink" title="Create GitHub Repo for the blog folder"></a>Create GitHub Repo for the blog folder</h1><p>It will be convenient to use git to version control your post writings. You can just create an empty private repo. Let’s call the folder as your_blog_folder&#x2F;</p><h1 id="Create-Github-Repo-for-hosting-blog-Github-Page"><a href="#Create-Github-Repo-for-hosting-blog-Github-Page" class="headerlink" title="Create Github Repo for hosting blog Github Page"></a>Create Github Repo for hosting blog Github Page</h1><p>A public repo with the repo name as YOUR_NAME.github.io, YOUR_NAME here is your GitHub account name.</p><h1 id="Install-Node-Hexo-and-NexT"><a href="#Install-Node-Hexo-and-NexT" class="headerlink" title="Install Node, Hexo and NexT"></a>Install Node, Hexo and NexT</h1><p>Install Node.js with Homebrew</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install node</span><br></pre></td></tr></table></figure><p>Install Hexo and NexT with npm</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br><span class="line">npm install hexo-theme-next</span><br></pre></td></tr></table></figure><h1 id="Initialize-Hexo"><a href="#Initialize-Hexo" class="headerlink" title="Initialize Hexo"></a>Initialize Hexo</h1><p>Make sure you are in the target folder</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> your_blog_folder</span><br><span class="line">hexo init</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><h1 id="Configure-Hexo-and-NexT"><a href="#Configure-Hexo-and-NexT" class="headerlink" title="Configure Hexo and NexT"></a>Configure Hexo and NexT</h1><p>your_blog_folder&#x2F;_config.yml is the config file for Hexo, and you need to copy the config file of NexT at &#x2F;node_modules&#x2F;hexo-theme-next&#x2F;_config.yml to the root folder of your_blog_folder&#x2F;, rename it to _config.next.yml. So they are now in the same folder. Here are some of the key configuration changes. </p><p>For _config.yml</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Site</span></span><br><span class="line">timezone: <span class="string">&#x27;America/Toronto&#x27;</span></span><br><span class="line"><span class="comment"># URL</span></span><br><span class="line">url: http://YOUR_NAME.github.io</span><br><span class="line"><span class="comment"># Extensions</span></span><br><span class="line">theme: next</span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: https://github.com/YOUR_NAME/YOUR_NAME.github.io</span><br><span class="line">  branch: main</span><br></pre></td></tr></table></figure><p>For _config.next.yml</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Creative Commons 4.0 International License.</span></span><br><span class="line">creative_commons:</span><br><span class="line">  sidebar: <span class="literal">true</span></span><br><span class="line">  post: <span class="literal">true</span></span><br><span class="line"><span class="comment"># Menu Settings</span></span><br><span class="line">menu:</span><br><span class="line">  home: / || fa fa-home</span><br><span class="line">  archives: /archives/ || fa fa-archive</span><br><span class="line"><span class="comment"># Sidebar Settings</span></span><br><span class="line">sidebar:</span><br><span class="line">  position: right</span><br><span class="line"><span class="comment"># Social Links</span></span><br><span class="line">social:</span><br><span class="line">  GitHub: https://github.com/YOUR_NAME || fab fa-github</span><br><span class="line"><span class="comment"># Subscribe through Telegram Channel, Twitter, etc.</span></span><br><span class="line">follow_me:</span><br><span class="line">  RSS: /atom.xml || fa fa-rss</span><br><span class="line"><span class="comment"># Misc Theme Settings</span></span><br><span class="line">codeblock:</span><br><span class="line">  theme:</span><br><span class="line">    light: tomorrow-night-bright</span><br><span class="line">    dark: tomorrow-night-bright</span><br><span class="line">  copy_button:</span><br><span class="line">    <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">    style: mac</span><br><span class="line"><span class="comment"># Reading progress bar</span></span><br><span class="line">reading_progress:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br></pre></td></tr></table></figure><h1 id="Write-a-post"><a href="#Write-a-post" class="headerlink" title="Write a post"></a>Write a post</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo n <span class="string">&#x27;Your_post_name&#x27;</span></span><br></pre></td></tr></table></figure><p>And if you are using vscode, you will find the Your_post_name.md in the your_blog_folder&#x2F;source&#x2F;_posts&#x2F; you can write in markdown.</p><h1 id="Generate-the-post-html"><a href="#Generate-the-post-html" class="headerlink" title="Generate the post html"></a>Generate the post html</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure><p>You can view the post locally and make changes if you need.</p><h1 id="Deploy-the-post-to-GitHub"><a href="#Deploy-the-post-to-GitHub" class="headerlink" title="Deploy the post to GitHub"></a>Deploy the post to GitHub</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure><p>It will automatically generate GitHub Page for you which you can see by visiting YOUR_NAME.github.io</p><p>When you try to deploy the blog, if you see this message ERROR Deployer not found: git, or other error messages, for example, you need rss feed ready for your blog, please double check if you have all node_modules installed.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br><span class="line">npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure><h1 id="Reminder"><a href="#Reminder" class="headerlink" title="Reminder"></a>Reminder</h1><p>If you git clone the private blog repo to write a new post, remember to npm install before you try to deploy it to github. Because the moment you git clone to your local machine, the folder node_modules is empty. It is not sync with git by default as set in the .gitignore generated by Hexo.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf node_modules &amp;&amp; npm install --force</span><br><span class="line">hexo d -g</span><br></pre></td></tr></table></figure><p>Ref:</p><p>Hexo<br><a href="https://hexo.io/">https://hexo.io</a></p><p>Theme NexT<br><a href="https://theme-next.js.org/">https://theme-next.js.org</a></p><p>hexo-generator-feed<br><a href="https://github.com/hexojs/hexo-generator-feed">https://github.com/hexojs/hexo-generator-feed</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Seven years ago, I wrote the first post in this blog to explain how to build this blog. Basically, I still use the Hexo framework for blo</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>HTTP Proxy via Squid in Ubuntu on Microsoft Azure</title>
    <link href="http://yiweishen.github.io/2022/02/24/HTTP-Proxy-via-Squid-in-Ubuntu-on-Microsoft-Azure/"/>
    <id>http://yiweishen.github.io/2022/02/24/HTTP-Proxy-via-Squid-in-Ubuntu-on-Microsoft-Azure/</id>
    <published>2022-02-24T17:34:21.000Z</published>
    <updated>2022-02-26T04:39:24.000Z</updated>
    
    <content type="html"><![CDATA[<p>For some reason, you need to use a HTTP Proxy.</p><p>Let me assume you have an account of Microsoft Azure. </p><h1 id="Create-VM-on-Azure"><a href="#Create-VM-on-Azure" class="headerlink" title="Create VM on Azure"></a>Create VM on Azure</h1><p>First, go to Azure Portal and create a linux virtual machine, say, Ubuntu 20.04 LTS. Default config will be fine during your VM setup.</p><h1 id="Connect-to-VM"><a href="#Connect-to-VM" class="headerlink" title="Connect to VM"></a>Connect to VM</h1><p>Connect to the virtual machine via SSH with client, in my case, I use Terminal on MacOS. Let’s rename the private key file to azureuser.pem which you download from the previous VM creation step. Use chmod 400 to ensure you have read-only access to the private key. </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 400 azureuser.pem</span><br><span class="line">ssh -i /Path/To/Some/Folder/azureuser.pem azureuser@vps_IP</span><br></pre></td></tr></table></figure><h1 id="Install-Squid"><a href="#Install-Squid" class="headerlink" title="Install Squid"></a>Install Squid</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update -y</span><br><span class="line">sudo apt-get upgrade -y</span><br><span class="line">sudo apt-get install squid -y</span><br></pre></td></tr></table></figure><h1 id="Update-Squid-Config-file"><a href="#Update-Squid-Config-file" class="headerlink" title="Update Squid Config file"></a>Update Squid Config file</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/squid/squid.conf</span><br></pre></td></tr></table></figure><p>Find and insert the below two lines BEFORE the line of http_access deny all, to allow your IP to use the proxy.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">acl client src your_IP</span><br><span class="line">http_access allow client</span><br></pre></td></tr></table></figure><p>By default, Squid uses port 3128. If you are going to change it, just remember to double check if any other application is using the port by default.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http_port PORT_NUMBER</span><br></pre></td></tr></table></figure><p>By default, Squid will append your original IP address in the HTTP requests it forwards, something like X-Forwarded-For: 192.1.2.3. So, if you don’t want the destination server to know you are using a proxy, and you want to remove some of the request_headers that Squid passes on to the destination server, you can Ctrl + W to find and uncomment these:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># forwarded_for off</span></span><br><span class="line"><span class="comment"># request_header_access Authorization allow all</span></span><br><span class="line"><span class="comment"># request_header_access Proxy-Authorization allow all</span></span><br><span class="line"><span class="comment"># request_header_access Cache-Control allow all           </span></span><br><span class="line"><span class="comment"># request_header_access Content-Length allow all</span></span><br><span class="line"><span class="comment"># request_header_access Content-Type allow all</span></span><br><span class="line"><span class="comment"># request_header_access Date allow all</span></span><br><span class="line"><span class="comment"># request_header_access Host allow all</span></span><br><span class="line"><span class="comment"># request_header_access If-Modified-Since allow all</span></span><br><span class="line"><span class="comment"># request_header_access Pragma allow all</span></span><br><span class="line"><span class="comment"># request_header_access Accept allow all</span></span><br><span class="line"><span class="comment"># request_header_access Accept-Charset allow all</span></span><br><span class="line"><span class="comment"># request_header_access Accept-Encoding allow all</span></span><br><span class="line"><span class="comment"># request_header_access Accept-Language allow all</span></span><br><span class="line"><span class="comment"># request_header_access Connection allow all</span></span><br><span class="line"><span class="comment"># request_header_access All deny all</span></span><br></pre></td></tr></table></figure><p>All, done. Ctrl + O to save the file, and Ctrl + X to exit the file. Restart Squid or maybe you can just restart VM.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service squid restart</span><br></pre></td></tr></table></figure><h1 id="Open-Port-for-Squid"><a href="#Open-Port-for-Squid" class="headerlink" title="Open Port for Squid"></a>Open Port for Squid</h1><p>Lastly, go to your VM on the azure portal, open the Networking Tab in the settings. You need to add one inbound port rules to make the Squid http_port number (by default, 3128) accessible from your IP.</p><h1 id="Use-HTTP-Proxy-in-Python"><a href="#Use-HTTP-Proxy-in-Python" class="headerlink" title="Use HTTP Proxy in Python"></a>Use HTTP Proxy in Python</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">http_proxy = &#123;</span><br><span class="line"><span class="string">&#x27;http&#x27;</span>: <span class="string">&#x27;http://vps_IP:PORT_NUMBER&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">r = requests.get(url, proxies=http_proxy)</span><br></pre></td></tr></table></figure><h1 id="Use-HTTP-Proxy-in-Terminal-on-MacOS-Bash"><a href="#Use-HTTP-Proxy-in-Terminal-on-MacOS-Bash" class="headerlink" title="Use HTTP Proxy in Terminal on MacOS (Bash)"></a>Use HTTP Proxy in Terminal on MacOS (Bash)</h1><p>Enter the below command into the terminal for a session use.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> http_proxy=http://vps_IP:PORT_NUMBER</span><br></pre></td></tr></table></figure><p>If you want to make the proxy permanent in the Terminal, you can add it into bash_profile.</p><h1 id="Use-HTTP-Proxy-on-iOS"><a href="#Use-HTTP-Proxy-on-iOS" class="headerlink" title="Use HTTP Proxy on iOS"></a>Use HTTP Proxy on iOS</h1><p>Go to the settings page of the WiFi you are currently using. Configure HTTP Proxy to Manual and enter the details. </p><p>By the way, save your time and do not use Squid to bypass GFW. It will fail, technically speaking. I’m sorry. </p><p>Squid is not designed to encrypt internet traffic by any means. On the contrary, Squid server can and will intercept SSL interception because Squid is literally the man-in-the-middle (MiTM). Keep that in mind if you consider making use of the other’s HTTP Proxy.</p><p>Ref:</p><p>Ubuntu documentation for Squid:<br><a href="https://help.ubuntu.com/community/Squid">https://help.ubuntu.com/community/Squid</a></p><p>Squid man page:<br><a href="http://manpages.ubuntu.com/manpages/focal/en/man8/squid.8.html">http://manpages.ubuntu.com/manpages/focal/en/man8/squid.8.html</a></p><p>Official Squid site:<br><a href="http://www.squid-cache.org/">http://www.squid-cache.org</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;For some reason, you need to use a HTTP Proxy.&lt;/p&gt;
&lt;p&gt;Let me assume you have an account of Microsoft Azure. &lt;/p&gt;
&lt;h1 id=&quot;Create-VM-on-Azu</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Store Password in Database</title>
    <link href="http://yiweishen.github.io/2021/07/15/Store-Password-in-Database/"/>
    <id>http://yiweishen.github.io/2021/07/15/Store-Password-in-Database/</id>
    <published>2021-07-15T02:59:48.000Z</published>
    <updated>2022-02-24T22:06:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>I have been thinking about how to store customer’s login details into the database.</p><p>I mean, how to arrange the tables to store the passwords securely enough so that even if one day the database is leaked (and it will), no actual passwords are exposed.</p><p>On seond thoughts, managing the passwords by myself could be a bad idea.</p><p>Hand it over to Google or Facebook.</p><p>OK.</p><p>Let’s say, for some unknown reasons, I have to do it.</p><p>The million-dollar question is, HOW.</p><ul><li>If I store the plain text password anywhere in the database, the company probably would just fire the guy who designed the database, that’s me, for good.</li><li>If I store the hashed password with username, just like that, it is vulnerable to dictionary or rainbow table attacks. But maybe I can keep my job, for now.</li><li>If I use SHA512, instead of MD5, as the hash function, the computational power required to crack the passwords is signaficantly different.</li></ul><h2 id="Solution-perhaps"><a href="#Solution-perhaps" class="headerlink" title="Solution (perhaps)"></a>Solution (perhaps)</h2><p>Add random salt to each individual password, and then calculate the SHA512 hash values. Remember to generate salt again, once the customer changes the password. Also, I need a cryptographically secure random function to generate salt.</p><table><thead><tr><th align="center">LoginID</th><th align="center">LoginName</th><th align="center">Salt</th><th align="center">HashedPasswordWithSalt</th></tr></thead><tbody><tr><td align="center">0000001</td><td align="center">Alice</td><td align="center">T7#jd</td><td align="center">RncFuVDvUtVxXUFrvOHPfiF</td></tr><tr><td align="center">0000002</td><td align="center">Bob</td><td align="center">$1Yo2</td><td align="center">UZ0CkHkEccFErZujyAl3wys</td></tr><tr><td align="center">0000003</td><td align="center">Charlie</td><td align="center">UWp*1</td><td align="center">Pt4a1176FY2zcewmbcvEuAN</td></tr></tbody></table><p>In practice, use longer salt, I guess.</p><p>Ref:</p><p>Password Cracking<br><a href="https://www.youtube.com/watch?v=7U-RbOKanYs">https://www.youtube.com/watch?v=7U-RbOKanYs</a></p><p>How NOT to Store Passwords!<br><a href="https://www.youtube.com/watch?v=8ZtInClXe1Q">https://www.youtube.com/watch?v=8ZtInClXe1Q</a></p><p>Rainbow table<br><a href="https://en.wikipedia.org/wiki/Rainbow_table">https://en.wikipedia.org/wiki/Rainbow_table</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;I have been thinking about how to store customer’s login details into the database.&lt;/p&gt;
&lt;p&gt;I mean, how to arrange the tables to store the</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Rescue a Bricked iPad after Jailbreaking</title>
    <link href="http://yiweishen.github.io/2021/07/11/Rescue-a-Bricked-iPad-after-Jailbreaking/"/>
    <id>http://yiweishen.github.io/2021/07/11/Rescue-a-Bricked-iPad-after-Jailbreaking/</id>
    <published>2021-07-11T17:01:16.000Z</published>
    <updated>2022-02-24T22:06:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>Somehow I decided to reset an useless old iPad (A1395, iOS 9.3.5) which had been jailbroken. After erasing all the content and settings, I found the iPad became bricked. The situation is that if you press the Power button, a few seconds of Apple logo shows, followed by a battery status in the center of the screen. And that’s it, it just did not turn on.</p><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>You need to make sure you have charged the iPad for several hours. It helps to rule out the cases when iPad refuses to turn on with low battery. If the battery is all good, there are two ways to rescue your iPad. Try the force-restart first.</p><h3 id="Force-Restart"><a href="#Force-Restart" class="headerlink" title="Force Restart"></a>Force Restart</h3><p>Hold down the Power button and the Home button at the same time for 10 seconds. You will see the Apple logo twice I guess. The second time when you see the logo, you can let go the two buttons and wait&#x2F;pray for the iPad to turn on.</p><h3 id="Factory-Reset-in-DFU-mode"><a href="#Factory-Reset-in-DFU-mode" class="headerlink" title="Factory Reset in DFU mode"></a>Factory Reset in DFU mode</h3><ul><li>Connect your iPad to a Mac (Sorry, I did not test if you can connect iPad to a Windows, chances are you can)</li><li>On the iPad, hold down the Power button and the Home button at the same time, yes, for 10 seconds.</li><li>Then, release the Power button but continue to hold the Home button for another 5 seconds.</li><li>It should be entering DFU mode now. Choose Restore the factory settings.</li><li>Wait for the iPad to reinstall everything once again.</li></ul><p>I know a bricked iPad is useless. But, you know what, after rescuing the old iPad, I find the iPad is <em>still</em> useless anyway.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Somehow I decided to reset an useless old iPad (A1395, iOS 9.3.5) which had been jailbroken. After erasing all the content and settings, </summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Emulator 30.7.4 Crashes in Android Studio 4.2.1</title>
    <link href="http://yiweishen.github.io/2021/06/24/Emulator-30-7-4-Crashes-in-Android-Studio-4-2-1/"/>
    <id>http://yiweishen.github.io/2021/06/24/Emulator-30-7-4-Crashes-in-Android-Studio-4-2-1/</id>
    <published>2021-06-24T18:03:05.000Z</published>
    <updated>2022-02-24T22:06:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>All emulators in AVD failed to run after I <em>accidentally</em> update Android Studio to 4.2.1 on macOS Catalina (10.15.7).</p><p>You can find more debug details if you run the emulator in terminal.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">emulator -list-avds</span><br><span class="line">emulator -avd your_avd_name</span><br></pre></td></tr></table></figure><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>Downgrade (sort of) amulator to 30.4.5 (build_id 7140946)<br><a href="https://dl.google.com/android/repository/emulator-darwin_x64-7140946.zip">https://dl.google.com/android/repository/emulator-darwin_x64-7140946.zip</a></p><p>First, downlaod the zip file and unzip it.<br>Then, find the emulator folder under sdk folder. Replace the items inside with what you have downloaded.<br>Restart Android Studio (for example, go to menu File, select Invalidate Caches &#x2F; Restart) and try to run the emulators again.</p><p>You will see the warnings saying something, like, these files can not be verified due to unknown developer. Remember to go to Mac System Preference, Security &amp; Privacy, under the General tab, allow these apps to run. Eventually, everything will be fine. Good luck.</p><p>Ref:<br><a href="https://issuetracker.google.com/issues/191799887">https://issuetracker.google.com/issues/191799887</a><br><a href="https://issuetracker.google.com/issues/191805460">https://issuetracker.google.com/issues/191805460</a><br><a href="https://medium.com/nerd-for-tech/how-to-downgrade-android-emulator-on-macos-6e611d2d2bcb">https://medium.com/nerd-for-tech/how-to-downgrade-android-emulator-on-macos-6e611d2d2bcb</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;All emulators in AVD failed to run after I &lt;em&gt;accidentally&lt;/em&gt; update Android Studio to 4.2.1 on macOS Catalina (10.15.7).&lt;/p&gt;
&lt;p&gt;You c</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>MySQL Workbench Hangs attempting to Open MySQL Editor</title>
    <link href="http://yiweishen.github.io/2021/06/13/MySQL-Workbench-Hangs-attempting-to-Open-MySQL-Editor/"/>
    <id>http://yiweishen.github.io/2021/06/13/MySQL-Workbench-Hangs-attempting-to-Open-MySQL-Editor/</id>
    <published>2021-06-13T02:20:54.000Z</published>
    <updated>2022-02-24T22:06:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>When this bug happens, it shows that it takes time to open the MySQL Editor, but the fact is that it will never open. So you will wait forever.</p><p>I am on MacOS Catalina and the MySQL Workbench version is 8.0.22, just in case you want to know.</p><h2 id="Why-this-error-happens-My-guess"><a href="#Why-this-error-happens-My-guess" class="headerlink" title="Why this error happens (My guess):"></a>Why this error happens (My guess):</h2><p>You changed the password to the MySQL database user, but it somehow failed to sync the password in the keychain.</p><h2 id="The-solution"><a href="#The-solution" class="headerlink" title="The solution:"></a>The solution:</h2><p>Go to the &#x2F;Applicaiton&#x2F;Utilities&#x2F; to find the Keychain Access App and run it. Search and delete the password to the database user. Try search ‘MySQL’. Reopen the MySQL Workbench and you should be fine now.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;When this bug happens, it shows that it takes time to open the MySQL Editor, but the fact is that it will never open. So you will wait fo</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Superclass Typo in Servlet Template of Eclipse</title>
    <link href="http://yiweishen.github.io/2021/05/24/Superclass-Typo-in-Servlet-Template-of-Eclipse/"/>
    <id>http://yiweishen.github.io/2021/05/24/Superclass-Typo-in-Servlet-Template-of-Eclipse/</id>
    <published>2021-05-24T00:52:39.000Z</published>
    <updated>2022-02-24T22:06:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>Update: The typo has been fixed if you are using Dynamic web module version 5.0</p><p>When you are using the Servlet Template in Eclipse, you may encounter the error saying “The import javax.servlet cannot be resolved.”</p><p>For example, I am using Eclipse for Mac (Version 4.19.0). First, create a Dynamic Web Project, target runtime: Apache Tomcat v10.0, Dynamic web module version 4.0. And inside this project, create a new servlet file using the Create Servlet Wizard. Soon you will see the errors pop up in the servlet file you just created.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// BEFORE</span></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br></pre></td></tr></table></figure><p>How to fix it? All you have to do is changing the superclass name from javax into jakarta. Why does this happen? I think it is because, as mentioned on Wikipedia page, that from 12 Jun 2020 and on, API moved from package javax.servlet to jakarta.servlet. Let’s hope Eclipse will update the template someday in future. For the exising codes out there, I guess they are doing well.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AFTER</span></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br></pre></td></tr></table></figure><p>Of course, you can create an empty class file to build servlet from scratch, to avoid such issues. Just in case you do face the similar errors in Eclipse when coding Java, I hope the simple fix would help you.</p><p>Wikipedia page of Jakarta Servlet:<br><a href="https://en.wikipedia.org/wiki/Jakarta_Servlet">https://en.wikipedia.org/wiki/Jakarta_Servlet</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Update: The typo has been fixed if you are using Dynamic web module version 5.0&lt;/p&gt;
&lt;p&gt;When you are using the Servlet Template in Eclipse</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Hello Hexo again</title>
    <link href="http://yiweishen.github.io/2021/05/03/Hello-Hexo/"/>
    <id>http://yiweishen.github.io/2021/05/03/Hello-Hexo/</id>
    <published>2021-05-03T01:24:54.000Z</published>
    <updated>2022-02-24T22:06:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>Finally, I got hexo upgraded.</p><p>Simple &amp; powerful as it is advertised.</p><p>It worked fine, I guess.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Finally, I got hexo upgraded.&lt;/p&gt;
&lt;p&gt;Simple &amp;amp; powerful as it is advertised.&lt;/p&gt;
&lt;p&gt;It worked fine, I guess.&lt;/p&gt;
</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Code myself a blog</title>
    <link href="http://yiweishen.github.io/2021/03/30/Code-myself-a-blog/"/>
    <id>http://yiweishen.github.io/2021/03/30/Code-myself-a-blog/</id>
    <published>2021-03-30T20:53:15.000Z</published>
    <updated>2022-02-24T22:06:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>I have been thinking about to code myself a blog from scratch because the hexo blog seems out of date. The interactions between Github and Hexo are sometimes failing and I got warnings of it might not be working in some future. Maybe it’s good time to practice some front-end coding with html&#x2F;css and javascript.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;I have been thinking about to code myself a blog from scratch because the hexo blog seems out of date. The interactions between Github an</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Leetcode</title>
    <link href="http://yiweishen.github.io/2021/03/30/Leetcode/"/>
    <id>http://yiweishen.github.io/2021/03/30/Leetcode/</id>
    <published>2021-03-30T20:45:17.000Z</published>
    <updated>2022-02-24T22:06:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>The coding experience on Leetcode is fantastic because you can always get instant feedback that your code is not working. Then you try again and get the feedback again that your codes fail. Back and forth serveral times until you get it.</p><p>To be honest, I like Project Euler more, because of its simplicity and the sense of art comes from the simplicity. Still, I think you need the Leetcode to practice to get a job. In this sense, it’s a wonderful website that gives you hope of the employment.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;The coding experience on Leetcode is fantastic because you can always get instant feedback that your code is not working. Then you try ag</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Code Complete</title>
    <link href="http://yiweishen.github.io/2021/03/23/Code-Complete/"/>
    <id>http://yiweishen.github.io/2021/03/23/Code-Complete/</id>
    <published>2021-03-23T22:10:19.000Z</published>
    <updated>2022-02-24T22:06:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>The book of Code Complete has been sitting on my book shelf for a long time. I always feel that it was a big book and the content is too much for my level. But these feelings were purely generated from the imagination because I never ever actually tried to read the book.</p><p>Until now. I began the reading. And it turns out the content makes sense to me in a lot of ways. I think it is considered as a classic book for a good reason.</p><p>It might take some time before I can finish the book, but I can say it now to anyone hesitate to read it, today is the day, just read it.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;The book of Code Complete has been sitting on my book shelf for a long time. I always feel that it was a big book and the content is too </summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>&gt; /dev/null 2&gt;&amp;1</title>
    <link href="http://yiweishen.github.io/2021/03/19/dev-null-2-1/"/>
    <id>http://yiweishen.github.io/2021/03/19/dev-null-2-1/</id>
    <published>2021-03-19T22:25:34.000Z</published>
    <updated>2022-02-24T22:06:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>I saw something in the shell code as follows.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /dev/random &gt; /dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure><p>Or something similar.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> lang=<span class="string">&quot;en_us.utf-8&quot;</span> &gt;/dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure><p>They all have this part.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;/dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure><p>I did some research to find out what it means. Basically, the number 1 is standard output, the number 2 is the standard error, the char &gt; is to redirect the flow of information, and 2&gt;&amp;1 means to treat the 2 the same way as the 1, and &#x2F;dev&#x2F;null, you know, is in the middle of nowhere.</p><p>So, to put them all together, this piece of code means that throw the standard output and standard error away as garbage. You will never see anything stdout or stderr on the screen or anywhere on disk. No, just say goodbye to them. They are gone for good.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;I saw something in the shell code as follows.&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>CRUD in MongoDB</title>
    <link href="http://yiweishen.github.io/2021/03/16/CRUD-in-MongoDB/"/>
    <id>http://yiweishen.github.io/2021/03/16/CRUD-in-MongoDB/</id>
    <published>2021-03-16T21:46:38.000Z</published>
    <updated>2022-02-24T22:06:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>CRUD operations in MongoDB, i.e. Create, Read, Update, Delete.</p><p>The code is for Pymongo.</p><p>Preparation</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> pymongo <span class="keyword">import</span> MongoClient</span><br><span class="line"></span><br><span class="line">client = MongoClient()</span><br><span class="line">db = client.test_database</span><br><span class="line">collection = db.test_collection</span><br><span class="line"></span><br><span class="line">post = &#123;<span class="string">&#x27;author&#x27;</span>: <span class="string">&#x27;Mike&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;text&#x27;</span>: <span class="string">&#x27;My first blog post!&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;tags&#x27;</span>: [<span class="string">&#x27;mongodb&#x27;</span>, <span class="string">&#x27;python&#x27;</span>, <span class="string">&#x27;pymongo&#x27;</span>],</span><br><span class="line">        <span class="string">&#x27;date&#x27;</span>: datetime.datetime.utcnow()&#125;</span><br></pre></td></tr></table></figure><p>CREATE:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">create_lines</span>():</span><br><span class="line">    collection.insert_one(post)</span><br><span class="line">    <span class="comment"># if we have multiple posts (an array of dictionaries)</span></span><br><span class="line">    collection.insert_many(posts)</span><br></pre></td></tr></table></figure><p>READ:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">read_lines</span>():</span><br><span class="line">    collection.find_one(&#123;<span class="string">&#x27;author&#x27;</span>: <span class="string">&#x27;Mike&#x27;</span>&#125;)</span><br><span class="line">    <span class="comment"># if we want to find multiple records at the same time</span></span><br><span class="line">    collection.find_many(&#123;<span class="string">&#x27;author&#x27;</span>: <span class="string">&#x27;Mike&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure><p>UPDATE:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">update_lines</span>():</span><br><span class="line">    collection.update_one(&#123;<span class="string">&#x27;author&#x27;</span>: <span class="string">&#x27;Mike&#x27;</span>&#125;,</span><br><span class="line">                          &#123;<span class="string">&#x27;$set&#x27;</span>: &#123;<span class="string">&#x27;text&#x27;</span>: <span class="string">&#x27;My second blog post!&#x27;</span>&#125;&#125;)</span><br><span class="line">    <span class="comment"># if we want to update all the relevant records at the same time</span></span><br><span class="line">    collection.update_many(&#123;<span class="string">&#x27;author&#x27;</span>: <span class="string">&#x27;Mike&#x27;</span>&#125;,</span><br><span class="line">                          &#123;<span class="string">&#x27;$set&#x27;</span>: &#123;<span class="string">&#x27;text&#x27;</span>: <span class="string">&#x27;My second blog post!&#x27;</span>&#125;&#125;)</span><br></pre></td></tr></table></figure><p>DELETE:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">delete_lines</span>():</span><br><span class="line">    collection.delete_one(&#123;<span class="string">&#x27;author&#x27;</span>: <span class="string">&#x27;Mike&#x27;</span>&#125;)</span><br><span class="line">    <span class="comment"># if we want to delete the matched records all at once</span></span><br><span class="line">    collection.delete_many(&#123;<span class="string">&#x27;author&#x27;</span>: <span class="string">&#x27;Mike&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure><p>I would say MongoDB is designed in a way that is very user-friendly.</p><p>Check out the pymongo website for more detailed instructions.<br><a href="https://pymongo.readthedocs.io/en/stable/tutorial.html">https://pymongo.readthedocs.io/en/stable/tutorial.html</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;CRUD operations in MongoDB, i.e. Create, Read, Update, Delete.&lt;/p&gt;
&lt;p&gt;The code is for Pymongo.&lt;/p&gt;
&lt;p&gt;Preparation&lt;/p&gt;
&lt;figure class=&quot;high</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Why MongoDB</title>
    <link href="http://yiweishen.github.io/2021/03/15/Why-MongoDB/"/>
    <id>http://yiweishen.github.io/2021/03/15/Why-MongoDB/</id>
    <published>2021-03-15T03:42:20.000Z</published>
    <updated>2022-02-24T22:06:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>Make the database in a simpler way and make it fast instead of designing complicated architecture of tables. MongoDB can do this with its document model to store things more naturally which can be later fit into your applications. Remember, it’s fast. I think it can make your life easier.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Make the database in a simpler way and make it fast instead of designing complicated architecture of tables. MongoDB can do this with its</summary>
      
    
    
    
    
  </entry>
  
</feed>
